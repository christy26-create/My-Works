;;PRAISE THE LORD
[System	: UDF]
	
	LedBfrDateDiamond	: String		: 527
	

[#Part : MST LED Details]

	Option		: MST LED Details Diamond	: ($IsCustOn:Company:##SVCurrentCompany) ;And (@@LOCKDATE)

[!Part: MST LED Details Diamond]

	Add			: Line		: After		: MST Parent	: Led BfrDate Diamond;,Led Area Diamond,Led IsActive,Led Warning Desc;
	

	[Line : Led BfrDate Diamond]
		
    Field       : Long Prompt, Led BfrDate Diamond
    Local       : Field 	: Long Prompt 	: Set as  : $$LocaleString:"Buffer Period"
	Local		: Field		: Default		: Set Always: Yes
	Local		: Field		: Default		: Color		: Blue
	
[Field: Led BfrDate Diamond]

    Use         : Name Field
    Storage     : LedBfrDateDiamond
	Full Width	: Yes
[#Object	:	Bill]
	
	StmtDate		:	$$Number:$LedBfrDateDiamond;$$MonthStart:($$NextMonth:$BillDate)	;If $$MonthStart:$BillDate=$BillDate Then $BillDate Else  
	CreditDays		:	($$Date:$BillCreditPeriod)-$BillDate
	StmtDueDate		:	$$Date:$StmtDate + $CreditDays
	
;select $Parent,$Name,$BillDate,$StmtDate,$CreditDays,$StmtDueDate,$BillCreditPeriod,$$DueDateinDays:$BillCreditPeriod,$ClosingBalance from ledgerbills order by $Name

;	[#Collection: NumItem Ledger Bills]
;		
;		Fetch		:	StmtDueDate,Parent,Name,FinalBalance

	[Collection	:	ACSBillsExclPDC]
		
		;Use			:	NumItemLedgerBills	;LedgerBills
		Type        		: Bills
		Child of			: ##BillLedgerName
		Filter      		: DueBillsFilter, AgeFilter, BillTypeFilter

		Compute	: Name				: $$Name

		Switch	  	: RemoteBills		: RemoteBills	: $$IsRemoteCompany
		
		Fetch		:	StmtDueDate,Parent,Name,FinalBalance,LedBfrDateDiamond

		Filter		:	FilterExclPDC
		Filter		:	FilterIsOverdue
		;SearchKey	:	$Parent	

;	[Collection	:	ACSBillsExclPDC]
;		
;		Use		:	ACSBillsExclPDCSrc
;		Fetch	:	StmtDueDate,Parent,Name,FinalBalance,Party
;		Filter		:	SelLedger	
		
				
		[System	:	Formula]
			
			FilterExclPDC		:	$FinalBalance<>0
			FilterIsOverdue	:	$StmtDueDate<$$MachineDate ;AND $Parent=@@SelLedger
			;FilterIsOvedue
	;select $Parent,$Name,$BillDate,$StmtDate,$CreditDays,$StmtDueDate,$BillCreditPeriod,$$DueDateinDays:$BillCreditPeriod,$ClosingBalance,$LedBfrDateDiamond from ACSBillsExclPDC order by $Name
	;select $Parent,$Name,$BillDate,$StmtDate,$CreditDays,$$Date:$BillCreditPeriod,$StmtDueDate,$BillCreditPeriod,$ClosingBalance from ACSBillsExclPDC order by $Parent
	
	;Ledger 
;[#Collection: Ledger]
;		
;		Compute	:	LedOverDueBill	:	$$CollectionField:$Name:1:ACSBillsExclPDC	;$$CollectionFieldByKey:$Name:@@SelLedger:ACSBillsExclPDC

[Collection: LedgerX]

    Use         : Alias Collection
    Type        : Ledger
    Title       : $$LocaleString:"List of Ledgers"
    IsODBCTable : Yes
	Fetch		: Name, Parent,TBalOpening, LedOpeningBalance,LedBfrDateDiamond
	Compute Var	: BillLedgerName	: String	: $Name
	;Compute		: LedBillCount		: $$NumItems:NumItemLedgerBills
	Compute	:	LedOverDueBill	:	$$CollectionField:$Name:1:ACSBillsExclPDC
	SearchKey	:	$Name
	
;[Collection: Ledger]
;
;    Use         : Alias Collection
;    Type        : Ledger
;    Title       : $$LocaleString:"List of Ledgers"
;    Report      : Ledger
;    Variable    : SLedger
;    Trigger     : SLedger
;    IsODBCTable : Yes
;	Fetch		: Name, Parent,TBalOpening, LedOpeningBalance
;	Fetch		: LedgerFBTCategory, IsFBTApplicable, IsFBTDutiesLedger, TaxType, LastVoucherDate
;	Fetch		: LedgerContact, LedgerPhone, ClosingBalance, ServiceCategory
;	Fetch		: ClosingOnAcctValue, OnAccountValue, ClosingDrOnAcctValue
;	Compute Var	: BillLedgerName	: String	: $Name
;	Compute		: LedBillCount		: $$NumItems:NumItemLedgerBills



	;============================
	;		EI Consignee
	;============================

;	[#Line: EI Consignee]
;		
;		Add	:	Field	:	name Field	;EI ConsigneeXX,
;		Local	:	Field	:	Name Field	:	Set as	:	$PartyLedgerName	;$LedOverDueBill:LedgerX:$PartyLedgerName
;;
;;	[Field	:	EI ConsigneeXX]
;;		
;;		Set as	:	#EIConsignee
;;		Variable	:	LedgerName	
;;		Modifies	:	LedgerName
;;		Set Always	:	Yes
;;		Width	:	50 mms

	[#Field: EI Consignee]

		Option		: EI Consignee ACS	: ($IsCustOn:Company:##SVCurrentCompany) And (@@IsSales)
		
		[!Field : EI Consignee ACS]

;			Add	:	Notify	:	EI Overdue Notify		:	($$IsCmpOwner OR $$CmpUserLevel= "Owner") And (NOT $$IsEmpty:$LedOverDueBill:Ledger:$PartyLedgerName)
;			Add	:	Control	: 	EI Overdue Warning	:	(Not($$IsCmpOwner OR $$CmpUserLevel= "Owner")) And (NOT $$IsEmpty:$LedOverDueBill:LedgerX:$PartyLedgerName)
			Add	:	Notify	:	EI Overdue Notify		:	($$IsCmpOwner OR $$CmpUserLevel= "Owner") And (NOT $$IsEmpty:($$CollectionFieldbyKey:$LedOverDueBill:$PartyLedgerName:LedgerX))
			Add	:	Control	: 	EI Overdue Warning	:	(Not($$IsCmpOwner OR $$CmpUserLevel= "Owner")) And (NOT $$IsEmpty:($$CollectionFieldbyKey:$LedOverDueBill:$PartyLedgerName:LedgerX))
			
		[System : Formula]
				
			EI Overdue Warning	: "Customer Invoice is overdue!!!" + $$NewLine +
												+ "Please contact administrator..."

			EI Overdue Notify		: "Customer Invoice is overdue!!!" + $$NewLine +
												+ "Press any key to continue..."







;================================
;		Ledger Master
;================================

;	[#Part : MST LED Details]
;
;		Option		: MST LED Details Midcom	: ($IsCustOn:Company:##SVCurrentCompany) And ($IsEnableLedActive:Company:##SVCurrentCompany)
;
;			[!Part: MST LED Details Midcom]
;
;				Add			: Line		: After		: MST Parent	: Led IsActive,Led Warning Desc
;				
;				[Line : Led IsActive]
;						
;					Field       : Long Prompt, Led IsActive
;					Local       : Field 	: Long Prompt : Set as  : $$LocaleString:"Is InActive?"
;					
;					[Field: Led IsActive]
;
;						Use         : Logical Field
;						Storage     : LedInActive
;
;
;			[Line : Led Warning Desc]
;					
;				Field       : Long Prompt, Led Warning Desc
;				Local       : Field 	: Long Prompt 	: Set as  : $$LocaleString:"Warning Description?"
;				Local		: Field		: Default		: Inactive	: Not $LedInActive
;				Local		: Field		: Default		: Set Always: Yes
;				
;				[Field: Led Warning Desc]
;
;					Use         : Name Field
;					Storage     : LedWarnDesc
;					Full Width	: Yes
;					Max			: 600


;[#Field: LED Limit]
;
;	Option		: LED Limit Midcom	: ($IsCustOn:Company:##SVCurrentCompany) And NOT ($$IsCmpOwner OR $$CmpUserLevel= "Owner") And ($IsEnaCLimitSec:Company:##SVCurrentCompany)
;		
;[!Field : LED Limit Midcom]
;
;	Skip		: Yes
;	
;

